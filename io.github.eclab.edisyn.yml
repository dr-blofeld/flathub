
id: io.github.eclab.edisyn
runtime: org.freedesktop.Platform
runtime-version: '24.08'
sdk: org.freedesktop.Sdk
sdk-extensions:
- org.freedesktop.Sdk.Extension.openjdk11
command: launch.sh
finish-args:
    - --env=PATH=/app/jre/bin:/usr/bin:/app/bin
    - --socket=x11
    - --socket=pulseaudio
    - --share=ipc
    - --filesystem=xdg-music
    - --filesystem=xdg-documents
    - --filesystem=xdg-desktop
    - --filesystem=xdg-download
    - --filesystem=xdg-public-share
    - --filesystem=xdg-pictures
    - --filesystem=xdg-templates
    - --filesystem=xdg-templates
modules:
    -   name: openjdk
        buildsystem: simple
        build-commands:
            -   /usr/lib/sdk/openjdk/install.sh

    -   name: edisyn
        buildsystem: simple
        build-commands:
            -   install -Dm755 launch.sh $FLATPAK_DEST/bin/launch.sh
            -   install -D edisyn.jar $FLATPAK_DEST/bin/edisyn.jar
            -   install -D io.github.eclab.edisyn.desktop $FLATPAK_DEST/share/applications/io.github.eclab.edisyn.desktop
            -   install -D io.github.eclab.edisyn.svg $FLATPAK_DEST/share/icons/hicolor/scalable/apps/io.github.eclab.edisyn.svg
            -   install -D io.github.eclab.edisyn.metainfo.xml $FLATPAK_DEST/share/metainfo/io.github.eclab.edisyn.metainfo.xml
        sources:
            -   type: file
                url: https://cs.gmu.edu/~eclab/projects/edisyn/edisyn.jar
                sha256: f6f44f4e0de39ace25cfc46891f378d7d715a1ff1387632a39369bb20ade71b6
                dest-filename: edisyn.jar
            -   type: script
                dest-filename: launch.sh
                commands:
                    - export _JAVA_OPTIONS=-Djava.util.prefs.userRoot=$HOME/.var/app/io.github.eclab.edisyn/config
                    - java -jar /app/bin/edisyn.jar   
            -   type: file
                path: io.github.eclab.edisyn.desktop
            -   type: file
                path: io.github.eclab.edisyn.svg
            -   type: file
                path: io.github.eclab.edisyn.metainfo.xml


